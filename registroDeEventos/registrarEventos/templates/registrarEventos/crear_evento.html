{% extends 'registrarEventos/base.html' %}

{% block title %}Registrar Nuevo Evento{% endblock %}

{% block content %}

<h1>Planea un evento Ã©pico</h1>

<form method="post">
    {% csrf_token %}
    <div class="form-section">
        <h3>Detalles del evento</h3>
        
        {% if evento_form.non_field_errors %}
            <div class="alert alert-danger">
                {{ evento_form.non_field_errors }}
            </div>
        {% endif %}

        <div class="row">
            <div class="col-md-6 mb-3">
                <label for="{{ evento_form.nombre.id_for_label }}" class="form-label">{{ evento_form.nombre.label }}</label>
                {{ evento_form.nombre }}
                {% if evento_form.nombre.errors %}<div class="error-list">{{ evento_form.nombre.errors }}</div>{% endif %}
            </div>
            <div class="col-md-6 mb-3">
                <label for="{{ evento_form.fecha.id_for_label }}" class="form-label">{{ evento_form.fecha.label }}</label>
                {{ evento_form.fecha }}
                {% if evento_form.fecha.errors %}<div class="error-list">{{ evento_form.fecha.errors }}</div>{% endif %}
            </div>
        </div>
        <div class="mb-3">
            <label for="{{ evento_form.ubicacion.id_for_label }}" class="form-label">{{ evento_form.ubicacion.label }}</label>
            {{ evento_form.ubicacion }}
            {% if evento_form.ubicacion.errors %}<div class="error-list">{{ evento_form.ubicacion.errors }}</div>{% endif %}
        </div>
    </div>

    <div class="form-section">
        <h3>Participantes</h3>
        
        {{ participante_formset.management_form }}
        
        {% for form in participante_formset %}
            <div class="participant-form">
                <h4 class="h6">Participante #{{ forloop.counter }}</h4>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.nombre.id_for_label }}" class="form-label">{{ form.nombre.label }}</label>
                        {{ form.nombre }}
                        {% if form.nombre.errors %}<div class="error-list">{{ form.nombre.errors }}</div>{% endif %}
                    </div>
                    <div class="col-md-6 mb-3">
                        <label for="{{ form.correo.id_for_label }}" class="form-label">{{ form.correo.label }}</label>
                        {{ form.correo }}
                        {% if form.correo.errors %}<div class="error-list">{{ form.correo.errors }}</div>{% endif %}
                    </div>
                </div>
            </div>
        {% endfor %}
    </div>

    <div class="text-center">
        <button type="submit" class="btn btn-primary">Registrar evento</button>
    </div>
</form>
{% endblock %}